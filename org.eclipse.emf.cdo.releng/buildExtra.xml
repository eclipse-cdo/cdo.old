<project name="buildExtra.xml" default="run">

	<target name="init">
	</target>

	<target name="run">
	</target>

	<target name="extraPackaging">
		<!-- TODO Use ant-featurefileset.jar from athena libs!!!  -->
		<property name="type.jar" value="${buildDirectory}/features/org.eclipse.emf.cdo.all/ant-featurefileset.jar" />
		<echo message="Type JAR: ${type.jar}" />

		<typedef name="featurefileset"
		         classname="org.eclipse.dash.common.releng.FeatureFileSet"
		         classpath="${type.jar}" />

		<unzip src="${buildDirectory}/${buildLabel}/${allZip}"
		       dest="${buildDirectory}/${buildLabel}/extra.packaging.tmp" />

		<for param="extraPackagingProperties">
			<path>
				<fileset dir="${buildDirectory}/${buildLabel}/eclipse/features"
				         includes="*/extraPackaging.properties" />
			</path>
			<sequential>
				<var file="@{extraPackagingProperties" />
				<zip destfile="${buildDirectory}/${buildLabel}/@{zip.prefix}-${buildAlias}.zip">
					<featurefileset dir="${buildDirectory}/${buildLabel}/extra.packaging.tmp"
					                featureID="@{feature.id}" />
				</zip>
			</sequential>
		</for>
	</target>

</project>
