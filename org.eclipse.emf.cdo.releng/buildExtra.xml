<project name="buildExtra.xml" default="run">

	<!-- TODO Use ant-featurefileset.jar from athena libs!!!  -->
	<typedef name="featurefileset"
	         classname="org.eclipse.dash.common.releng.FeatureFileSet"
	         classpath="${buildDirectory}/features/org.eclipse.emf.cdo.all/ant-featurefileset.jar" />

	<target name="init">
	</target>

	<target name="run">
	</target>

	<target name="extraPackaging">
		<unzip src="${buildDirectory}/${buildLabel}/${allZip}" dest="${buildDirectory}/extra.packaging.tmp" />

		<for param="extraPackagingProperties">
			<path>
				<fileset dir="${buildDirectory}/features" includes="*/extraPackaging.properties" />
			</path>
			<sequential>
				<var name="feature.id" unset="true" />
				<var name="zip.prefix" unset="true" />
				<var file="@{extraPackagingProperties}" />
				<zip destfile="${buildDirectory}/${buildLabel}/${zip.prefix}-${buildAlias}.zip">
					<featurefileset dir="${buildDirectory}/extra.packaging.tmp" featureID="${feature.id}" />
				</zip>
			</sequential>
		</for>
	</target>

</project>
